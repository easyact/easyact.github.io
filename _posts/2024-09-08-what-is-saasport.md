---
title: "What is SAASport?"
date: 2024-09-08
---
{:toc}

⼀⾏代码开启全端互联⽹SaaS计费⽀付。
# 背景 (Why SAASport?)
## 计费研发
云计算和SaaS等类型企业的计费服务越来越复杂。自建成本也会增加。
而且由于开发团队的领域偏好，计费服务往往被边缘化。
并且由于计费的严肃性和繁琐性，导致计费领域的自动化一直不够完美，甚至妨碍运营。

因此SaaS作为微服务理念的延伸，成为一个强大的替代项。
## 软件研发成本居高不下
管理各种规模的企业家都会被软件开发成本所困扰：软件技术发展了几十年，
为什么研发成本和效率让人感觉不降反升呢？优秀开发者的招募依然很难，本来就少，
懂业务的更少，有共同理想的就更凤毛麟角了。
## 敏捷、API和service mesh
Kubernetes和无服务器的普及让更多的开发者开始严肃地考虑service mesh。
RESTful API作为优秀的查询和易用的修改风格，已经渐渐成为主流。标准化的发生，
暗示着新的自动化水平和生产关系的涌现。这将对软件研发效率产生深远的影响。
验收测试驱动开发、审计、可插拔性、自动化运维等领域，都已经准备好迎接下一阶段的
新质生产力和生产关系。各个角度生产关系的协同效应不可简单忽视。这将是软件行业的
另一次敏捷革命。
## 中国国情：创投能力差
全球的软件业存在着SAAS化，小而美的趋势。但是仅靠局部优化的、小而美的SAAS，
很难短期激活并有效提高疲弱的中国创投圈，也很难创造美股七朵金花的奇迹。

虽然软件业提倡全球合作，但是中国的开发者也要考虑国情。如何创造更繁荣的中国软件生态圈，
我们不能指望github帮我们解决。

中国的软件开发者显然也没有发达国家的软件开发者那么从容，从“996”、“007”、“福报”
等词汇的发明就可见一斑。我们没有西方那么宽容的社会保障，自然需要更加功利的软件社区，
而不是用爱发电或少数精英才能玩转的开源模式。功利不代表冷酷，而是在大规模协作的基础上，
叠加分配机制，为普通人创造更多的被动收入管道，解决开发者“热爱但不赚钱”的尴尬矛盾。
# 远景 (What is SAASport?)
构建针对小而美的企业或个体的协作基础设施。
## 计费
复杂计费轻而易举，实时结算，依用计费，现金流一目了然。
全渠道价格页面注册即生成。
复杂计费规则可定制可分享。在SAASport后台部署定制规则后即可立即体现到计费页面。
审计合规免费获得。去中心化、小而美的单位松散合作，通过API或事件实时获取/提供有价服务。
由于收入动态化，预测和总结可以帮助经营者及时应对变化。
资产负债和现金流关系的可视化帮助人们做出更精确理性的计划。
## 众包研发
API市场的自动化验证套餐帮助外行人更快地攒出高质量的应用。软件架构师变身为众包分包商，
将众筹招标的软件需求分解为独立的API规格小标，定义自动化验收套件，再自动筛选开发者投标。
不同的架构分包商组合出不同的解决方案，管理质量和上下游提成比例。

供应链金融方面，更多通过股权众筹而不是贷款支持供应链，并提供衍生品风控工具。

衍生品也会用于简化和吸引投资。并会通过AI等手段匹配甚至定制金融产品。
# 约束
## 安全
1. 租户仅仅应该共享用户id和昵称，而非用户详情。
2. 保密协议

# How?
## 里程碑
1. SAAS计费自动化
2. 租户DSL自定义部署计费规则
3. 自动扣费
4. API市场
5. API招标和自动化验收
6. API众筹
7. API股权众筹

## 技术架构
### 语言选择
#### JS/TS
前端没得选
#### Scala
Java生态中函数响应式编程的最优选项。Clojure缺乏类型系统的表现力和规范力。
而Kotlin的Lens还是需要代码生成，实用主义不纯的选择限制了其函数式编程的潜力。
Java的新版本虽然加入了很多类似Scala的特性，但是很多语言层面的固有缺陷仍然是
无法直视的（无可选参数、泛型和解构太弱、函数调用需要apply）。

### Dashboard租户后台
Next.js + docker-compose
#### 设计权衡
* 研发效率
  * 成熟度
  * 架构复杂度
* 代码生成难度
* 部署成本
  * 由于在中国公开IP至少预置一台服务器，因此无服务器对比docker-compose并无成本优势。

### Widget
React.js + Vite + AWS Lambda
#### 设计权衡
* SDK分发js包尺寸

### 支付API
Scala zio-lambda + AWS Lambda native image
#### 设计权衡
* 支付提供商SDK语言兼容性: 如支付宝只提供Java SDK。
* 性能
* 并发
* 部署成本
* 开发者风格偏好：函数响应式编程

### 价格API
APIGateway REST + AWS Lambda nodejs + DynamoDB
#### 设计权衡
* 研发效率
* 部署成本